
var Stor=function(){};"use strict";Stor.getId=function(){var id=Math.random(10).toString(16).split(".")[1];return(localStorage.getItem(id))?Stor.getId():id;};Stor.create=function(k,v){var key=k,value=v;if(!!!value){value=key;key=Stor.getId();}value=JSON.stringify(value);localStorage.setItem(key,value);return[key,value];};Stor.keys=Stor.arrayOfKeys=function(){var keys=[];for(var key in localStorage){keys.push(key);}return keys;};Stor.find=Stor.fetchValueFromKey=function(k){var keys=Stor.keys(),foundValues=[];if(typeof k=="string"){return JSON.parse(localStorage.getItem(k));}if(k instanceof Array){var searchTerms=k;for(var termIndex in searchTerms){for(var key in keys){if(keys[key].toLowerCase()===searchTerms[termIndex].toLowerCase()){foundKeys.push(JSON.parse(localStorage.getItem(keys[key])));}}}return foundValues;}if(k instanceof RegExp){for(var key in keys){if(keys[key].match(k)){foundValues.push(JSON.parse(localStorage.getItem(keys[key])));}}return foundValues;}};Stor.where=Stor.whereValueEquals=function(p){var foundKeys=[];if(typeof p=="string"){var searchTerm=p.toLowerCase(),keys=Stor.arrayOfKeys();for(var key in Stor.keys()){if(Stor.fetchValueFromKey(keys[key]).toLowerCase()===searchTerm){foundKeys.push(keys[key]);}}}if(p instanceof Array){var searchTerms=p,keys=Stor.keys();for(var termIndex in searchTerms){for(var key in Stor.arrayOfKeys()){if(Stor.fetchValueFromKey(keys[key]).toLowerCase()===searchTerms[termIndex].toLowerCase()){foundKeys.push(keys[key]);}}}}if(p instanceof RegExp){var keys=Stor.keys();for(var key in Stor.arrayOfKeys()){if(Stor.fetchValueFromKey(keys[key]).match(p)){foundKeys.push(key[key]);}}}return foundKeys;};Stor.map=function(fn){var newPairs={},keys=Stor.keys();for(var key in keys){var result=fn(Stor.fetchValueFromKey(keys[key]));newPairs[keys[key]]=result;}return newPairs;};